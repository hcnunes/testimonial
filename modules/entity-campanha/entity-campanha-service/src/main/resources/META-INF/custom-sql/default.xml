<?xml version="1.0" encoding="UTF-8"?>
<custom-sql>
    <sql id="findNotSortedByPromocaoId">
        <![CDATA[
            SELECT participanteId FROM FOO_Participante AS par
				WHERE par.participanteId NOT IN 
					(SELECT participanteId FROM FOO_Premio AS pre
	                WHERE par.participanteId = pre.userIdPremiado)
					AND par.promocaoId = ?
	               		ORDER by rand() LIMIT 1
        ]]>
    </sql>
    
    <sql id="findParticipanteIfSortedByPromocaoIduserIdPremiado">
        <![CDATA[
            SELECT EXISTS
				(SELECT userIdPremiado FROM FOO_Premio 
				WHERE promocaoId = ? 
				AND userIdPremiado = ?)
        ]]>
    </sql>
    
     <sql id="findPromocaoFinalizada">
        <![CDATA[
            SELECT EXISTS
				(SELECT userIdPremiado from FOO_Premio 
				WHERE userIdPremiado=0
				and promocaoId = ?)
        ]]>
    </sql>
    
</custom-sql>

